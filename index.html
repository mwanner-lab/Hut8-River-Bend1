<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>River Bend - MSY01 Project Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Lora', Georgia, serif;
            background: linear-gradient(135deg, #141413 0%, #1c1c1a 100%);
            min-height: 100vh;
            color: #faf9f5;
            padding: 20px;
        }

        .container { max-width: 1600px; margin: 0 auto; }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(250,249,245,0.04);
            border-radius: 12px;
            border: 1px solid rgba(176,174,165,0.15);
        }

        h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(90deg, #d97757, #e8a87c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .subtitle { color: #b0aea5; font-size: 0.95rem; }

        .project-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .info-card {
            background: rgba(217,119,87,0.1);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(217,119,87,0.2);
        }

        .info-card label {
            font-size: 0.75rem;
            color: #b0aea5;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-card .value {
            font-size: 1.25rem;
            font-weight: 600;
            color: #d97757;
            margin-top: 4px;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid rgba(176,174,165,0.25);
            background: rgba(250,249,245,0.04);
            color: #faf9f5;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85rem;
            font-family: 'Poppins', sans-serif;
        }

        .filter-btn:hover, .filter-btn.active {
            background: rgba(217,119,87,0.3);
            border-color: #d97757;
        }

        .legend {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            padding: 15px;
            background: rgba(250,249,245,0.025);
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .rag-legend {
            display: flex;
            gap: 20px;
            padding: 10px 15px;
            background: rgba(250,249,245,0.025);
            border-radius: 8px;
            margin-bottom: 20px;
            align-items: center;
        }

        .rag-legend-title { font-size: 0.8rem; color: #b0aea5; font-weight: 500; }

        .rag-item { display: flex; align-items: center; gap: 6px; font-size: 0.8rem; }

        .rag-dot { width: 12px; height: 12px; border-radius: 50%; }
        .rag-dot.red { background: #c0392b; }
        .rag-dot.amber { background: #d97757; }
        .rag-dot.green { background: #788c5d; }
        .rag-dot.none { background: #8a877d; }

        .gantt-container {
            background: rgba(250,249,245,0.025);
            border-radius: 12px;
            border: 1px solid rgba(176,174,165,0.15);
            overflow: hidden;
        }

        .gantt-header {
            display: grid;
            grid-template-columns: 50px 320px 1fr;
            background: rgba(20,20,19,0.5);
            border-bottom: 1px solid rgba(176,174,165,0.15);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .rag-header, .task-header {
            padding: 12px 16px;
            font-weight: 600;
            font-size: 0.85rem;
            color: #b0aea5;
            border-right: 1px solid rgba(176,174,165,0.15);
        }

        .rag-header { text-align: center; padding: 12px 8px; }

        .timeline-header { display: flex; overflow-x: auto; }

        .month-label {
            min-width: 55px;
            padding: 12px 8px;
            text-align: center;
            font-size: 0.75rem;
            color: #b0aea5;
            border-right: 1px solid rgba(250,249,245,0.04);
        }

        .month-label.year-start { border-left: 2px solid rgba(176,174,165,0.25); }

        .gantt-body { max-height: 70vh; overflow-y: auto; overflow-x: hidden; }

        .gantt-row {
            display: grid;
            grid-template-columns: 50px 320px 1fr;
            border-bottom: 1px solid rgba(250,249,245,0.04);
            transition: background 0.2s;
        }

        .gantt-row:hover { background: rgba(250,249,245,0.025); }

        .gantt-row.phase-header { background: rgba(217,119,87,0.1); }
        .gantt-row.phase-header .task-name { font-weight: 700; color: #d97757; }

        .rag-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid rgba(176,174,165,0.15);
            cursor: pointer;
        }

        .rag-indicator {
            width: 20px; height: 20px; border-radius: 50%;
            border: 2px solid rgba(176,174,165,0.25);
            transition: all 0.2s;
        }

        .rag-indicator:hover { transform: scale(1.2); }
        .rag-indicator.red { background: #c0392b; border-color: #ef4444; }
        .rag-indicator.amber { background: #d97757; border-color: #d97757; }
        .rag-indicator.green { background: #788c5d; border-color: #788c5d; }
        .rag-indicator.none { background: transparent; }

        .task-cell {
            padding: 10px 16px;
            border-right: 1px solid rgba(176,174,165,0.15);
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .task-cell:hover { background: rgba(250,249,245,0.02); }

        .task-name {
            font-size: 0.82rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
        }

        .task-indent-1 { padding-left: 32px; }
        .task-indent-2 { padding-left: 48px; }

        .task-duration { font-size: 0.7rem; color: #8a877d; white-space: nowrap; }

        .has-comment { color: #d97757; font-size: 12px; }

        .timeline-cell {
            position: relative;
            height: 38px;
            display: flex;
            align-items: center;
        }

        .bar {
            position: absolute;
            height: 22px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            padding: 0 8px;
            font-size: 0.65rem;
            font-weight: 500;
            color: white;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            overflow: hidden;
            white-space: nowrap;
        }

        .bar:hover {
            transform: scaleY(1.15);
            box-shadow: 0 4px 12px rgba(20,20,19,0.5);
            z-index: 5;
        }

        .bar.design { background: linear-gradient(90deg, #6a9bcc, #89b3d9); }
        .bar.procurement { background: linear-gradient(90deg, #4a7fa8, #6a9bcc); }
        .bar.substation { background: linear-gradient(90deg, #d97757, #e8a87c); }
        .bar.sitework { background: linear-gradient(90deg, #788c5d, #92a878); }
        .bar.construction { background: linear-gradient(90deg, #5889b0, #7aa5c8); }
        .bar.vertiv { background: linear-gradient(90deg, #7aa5c8, #9bbdda); }
        .bar.commissioning { background: linear-gradient(90deg, #c4694e, #d97757); }
        .bar.power { background: linear-gradient(90deg, #788c5d, #92a878); }
        .bar.milestone { background: linear-gradient(90deg, #d97757, #e8a87c); }

        .milestone-marker {
            position: absolute;
            width: 0; height: 0;
            border-left: 9px solid transparent;
            border-right: 9px solid transparent;
            border-bottom: 14px solid #d97757;
            transform: translateX(-9px);
            cursor: pointer;
        }

        .milestone-marker.completed { border-bottom-color: #788c5d; }

        .grid-lines {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: flex;
            pointer-events: none;
        }

        .grid-line {
            min-width: 55px;
            border-right: 1px solid rgba(250,249,245,0.025);
        }

        .grid-line.year-start { border-right: 2px solid rgba(176,174,165,0.15); }

        .today-line {
            position: absolute;
            top: 0; bottom: 0;
            width: 2px;
            background: #c0392b;
            z-index: 4;
            pointer-events: none;
        }

        .tooltip {
            position: fixed;
            background: #1c1c1a;
            border: 1px solid rgba(176,174,165,0.25);
            padding: 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            max-width: 320px;
        }

        .tooltip.visible { opacity: 1; }
        .tooltip-title { font-weight: 600; margin-bottom: 8px; color: #d97757; }
        .tooltip-row { display: flex; justify-content: space-between; margin-bottom: 4px; gap: 16px; }
        .tooltip-label { color: #b0aea5; }

        .complete { color: #92a878; }
        .high { color: #d97757; }
        .medium { color: #d97757; }
        .low { color: #c0392b; }
        .not-started { color: #b0aea5; }

        .progress-fill-complete { background: linear-gradient(90deg, #788c5d, #92a878); }
        .progress-fill-high { background: linear-gradient(90deg, #5889b0, #7aa5c8); }
        .progress-fill-medium { background: linear-gradient(90deg, #d97757, #e8a87c); }
        .progress-fill-low { background: linear-gradient(90deg, #a93226, #c0392b); }
        .progress-fill-not-started { background: rgba(176,174,165,0.25); }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(20,20,19,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active { display: flex; }

        .modal {
            background: #1c1c1a;
            border: 1px solid rgba(176,174,165,0.15);
            border-radius: 16px;
            padding: 30px;
            min-width: 450px;
            max-width: 90%;
        }

        .modal h3 { font-size: 1.2rem; margin-bottom: 20px; color: #faf9f5; }
        .modal .input-group { margin-bottom: 15px; }

        .modal .input-group label {
            display: block; font-size: 0.8rem; color: #b0aea5;
            margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px;
        }

        .modal input, .modal textarea, .modal select {
            width: 100%; padding: 12px 16px;
            background: rgba(20,20,19,0.5);
            border: 1px solid rgba(176,174,165,0.15);
            border-radius: 8px; color: #faf9f5;
            font-size: 1rem; font-family: inherit;
        }

        .modal textarea { min-height: 100px; resize: vertical; }

        .modal input:focus, .modal textarea:focus, .modal select:focus {
            outline: none; border-color: #d97757;
        }

        .rag-select-group { display: flex; gap: 10px; }

        .rag-option {
            flex: 1; padding: 12px;
            border: 2px solid rgba(176,174,165,0.15);
            border-radius: 8px; text-align: center;
            cursor: pointer; transition: all 0.2s;
        }

        .rag-option:hover { border-color: rgba(176,174,165,0.35); }
        .rag-option.selected { border-width: 3px; }
        .rag-option.red { border-color: #ef4444; background: rgba(239, 68, 68, 0.1); }
        .rag-option.red.selected { background: rgba(239, 68, 68, 0.2); }
        .rag-option.amber { border-color: #d97757; background: rgba(217,119,87,0.1); }
        .rag-option.amber.selected { background: rgba(217,119,87,0.2); }
        .rag-option.green { border-color: #788c5d; background: rgba(120,140,93,0.1); }
        .rag-option.green.selected { background: rgba(120,140,93,0.2); }
        .rag-option.none { border-color: #8a877d; background: rgba(100, 116, 139, 0.1); }
        .rag-option.none.selected { background: rgba(138,135,125,0.2); }

        .rag-option-dot { width: 24px; height: 24px; border-radius: 50%; margin: 0 auto 8px; }
        .rag-option.red .rag-option-dot { background: #c0392b; }
        .rag-option.amber .rag-option-dot { background: #d97757; }
        .rag-option.green .rag-option-dot { background: #788c5d; }
        .rag-option.none .rag-option-dot { background: #8a877d; }

        .rag-option-label { font-size: 0.75rem; color: #b0aea5; }

        .modal-buttons { display: flex; gap: 10px; justify-content: flex-end; margin-top: 25px; }

        .modal button {
            padding: 10px 20px; border-radius: 8px; font-size: 0.9rem;
            cursor: pointer; transition: all 0.2s;
        }

        .modal .btn-cancel { background: transparent; border: 1px solid rgba(176,174,165,0.25); color: #b0aea5; }
        .modal .btn-save { background: #d97757; border: none; color: white; }
        .modal .btn-save:hover { background: #c4694e; }

        .summary-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .summary-card {
            background: rgba(250,249,245,0.025);
            border: 1px solid rgba(176,174,165,0.15);
            border-radius: 12px;
            padding: 20px;
        }

        .summary-title {
            font-size: 1rem; font-weight: 600;
            margin-bottom: 15px; padding-bottom: 10px;
            border-bottom: 1px solid rgba(176,174,165,0.15);
        }

        .summary-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 0; border-bottom: 1px solid rgba(250,249,245,0.04);
        }

        .summary-item:last-child { border-bottom: none; }
        .summary-item span:first-child { font-size: 0.9rem; color: #e8e6dc; }
        .summary-date { font-size: 0.8rem; color: #8a877d; }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 4px;
            margin-bottom: 24px;
            background: rgba(20,20,19,0.5);
            padding: 4px;
            border-radius: 10px;
            border: 1px solid rgba(176,174,165,0.12);
        }

        .tab-btn {
            flex: 1;
            padding: 12px 24px;
            background: transparent;
            border: none;
            color: #8a877d;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.25s;
            font-family: 'Poppins', sans-serif;
        }

        .tab-btn:hover { color: #b0aea5; background: rgba(250,249,245,0.035); }

        .tab-btn.active {
            background: rgba(217,119,87,0.2);
            color: #d97757;
            box-shadow: 0 2px 8px rgba(217,119,87,0.2);
        }

        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        /* Weekly Report Styles */
        .report-section {
            background: rgba(250,249,245,0.025);
            border: 1px solid rgba(176,174,165,0.15);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .report-section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(176,174,165,0.15);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .report-section-title .section-icon {
            width: 32px; height: 32px; border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1rem;
        }

        .report-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-high { background: rgba(192,57,43,0.15); color: #e06050; border: 1px solid rgba(192,57,43,0.3); }
        .badge-med { background: rgba(217,119,87,0.15); color: #d97757; border: 1px solid rgba(217,119,87,0.3); }
        .badge-low { background: rgba(120,140,93,0.15); color: #92a878; border: 1px solid rgba(34,197,94,0.3); }
        .badge-complete { background: rgba(120,140,93,0.15); color: #92a878; border: 1px solid rgba(120,140,93,0.3); }
        .badge-progress { background: rgba(217,119,87,0.15); color: #d97757; border: 1px solid rgba(59,130,246,0.3); }
        .badge-risk { background: rgba(192,57,43,0.15); color: #e06050; border: 1px solid rgba(192,57,43,0.3); }
        .badge-upcoming { background: rgba(106,155,204,0.15); color: #6a9bcc; border: 1px solid rgba(139,92,246,0.3); }
        .badge-planning { background: rgba(100,116,139,0.15); color: #b0aea5; border: 1px solid rgba(100,116,139,0.3); }
        .badge-open { background: rgba(217,119,87,0.15); color: #d97757; border: 1px solid rgba(217,119,87,0.3); }
        .badge-monitor { background: rgba(106,155,204,0.15); color: #89b3d9; border: 1px solid rgba(106,155,204,0.3); }
        .badge-active { background: rgba(217,119,87,0.15); color: #d97757; border: 1px solid rgba(59,130,246,0.3); }

        .report-highlight {
            background: rgba(217,119,87,0.08);
            border-left: 3px solid #d97757;
            padding: 16px 20px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 16px;
            font-size: 0.9rem;
            line-height: 1.7;
            color: #e8e6dc;
        }

        .report-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }

        .report-stat-card {
            background: rgba(20,20,19,0.4);
            border: 1px solid rgba(176,174,165,0.12);
            border-radius: 10px;
            padding: 18px;
        }

        .report-stat-card .stat-label {
            font-size: 0.75rem;
            color: #8a877d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        .report-stat-card .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #faf9f5;
        }

        .report-stat-card .stat-sub {
            font-size: 0.8rem;
            color: #b0aea5;
            margin-top: 4px;
        }

        .report-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .report-table thead th {
            background: rgba(20,20,19,0.5);
            padding: 10px 14px;
            text-align: left;
            color: #b0aea5;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid rgba(176,174,165,0.15);
        }

        .report-table tbody td {
            padding: 10px 14px;
            border-bottom: 1px solid rgba(250,249,245,0.04);
            color: #e8e6dc;
        }

        .report-table tbody tr:hover { background: rgba(250,249,245,0.025); }

        .report-list { list-style: none; padding: 0; }

        .report-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(250,249,245,0.04);
            font-size: 0.9rem;
            color: #e8e6dc;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .report-list li:last-child { border-bottom: none; }

        .report-list li::before {
            content: '›';
            color: #d97757;
            font-weight: 700;
            font-size: 1.1rem;
            flex-shrink: 0;
            margin-top: -1px;
        }

        .risk-score-high { color: #e06050; font-weight: 700; }
        .risk-score-med { color: #d97757; font-weight: 700; }

        .lookahead-week {
            background: rgba(20,20,19,0.4);
            border: 1px solid rgba(176,174,165,0.12);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 16px;
        }

        .lookahead-week h4 {
            font-size: 0.95rem;
            color: #d97757;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .lookahead-category { margin-bottom: 12px; }

        .lookahead-category h5 {
            font-size: 0.8rem;
            color: #6a9bcc;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        .lookahead-category ul {
            list-style: none;
            padding: 0;
        }

        .lookahead-category ul li {
            padding: 4px 0;
            font-size: 0.85rem;
            color: #b0aea5;
            padding-left: 16px;
            position: relative;
        }

        .lookahead-category ul li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: #8a877d;
        }

        .accel-card {
            background: rgba(120,140,93,0.06);
            border: 1px solid rgba(120,140,93,0.15);
            border-radius: 10px;
            padding: 16px;
        }

        .accel-card .accel-num {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px; height: 24px;
            background: rgba(120,140,93,0.2);
            color: #92a878;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .accel-card p { font-size: 0.88rem; color: #e8e6dc; }

        .report-kpi-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .report-kpi {
            text-align: center;
            padding: 14px;
            background: rgba(20,20,19,0.4);
            border-radius: 8px;
            border: 1px solid rgba(176,174,165,0.09);
        }

        .report-kpi .kpi-value { font-size: 1.4rem; font-weight: 700; color: #92a878; }
        .report-kpi .kpi-label { font-size: 0.7rem; color: #8a877d; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 4px; }

        .report-header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding: 20px 24px;
            background: rgba(250,249,245,0.025);
            border-radius: 12px;
            border: 1px solid rgba(176,174,165,0.12);
        }

        .report-header-bar h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #faf9f5;
        }

        .report-header-bar .report-meta {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .report-header-bar .report-meta span {
            font-size: 0.85rem;
            color: #b0aea5;
        }

        .report-header-bar .report-meta strong { color: #d97757; }

        h2, h3, h4, h5,
        .summary-title,
        .info-card label,
        .stat-label,
        .kpi-label,
        .report-badge,
        .rag-legend-title,
        .report-header-bar h2,
        .report-table thead th,
        .lookahead-category h5,
        .modal h3 {
            font-family: 'Poppins', sans-serif;
        }

        @media (max-width: 768px) {
            .gantt-header, .gantt-row { grid-template-columns: 40px 200px 1fr; }
            .modal { min-width: 90%; }
            .summary-section { grid-template-columns: 1fr; }
            .tab-btn { padding: 10px 12px; font-size: 0.8rem; }
            .report-grid { grid-template-columns: 1fr; }
            .report-header-bar { flex-direction: column; gap: 12px; align-items: flex-start; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>River Bend - Design IAP Schedule</h1>
            <p class="subtitle">HUT 8 Data Center (Vertiv) | Jacobs Engineering | Oct 2025 - Sep 2027</p>

            <div class="project-info">
                <div class="info-card">
                    <label>Schedule Status</label>
                    <div class="value">Preliminary</div>
                </div>
                <div class="info-card">
                    <label>Data Halls</label>
                    <div class="value">4 Halls</div>
                </div>
                <div class="info-card">
                    <label>Total Duration</label>
                    <div class="value">501 Days</div>
                </div>
                <div class="info-card">
                    <label>Project Start</label>
                    <div class="value">10 Oct 2025</div>
                </div>
                <div class="info-card">
                    <label>Project End</label>
                    <div class="value">30 Sep 2027</div>
                </div>
                <div class="info-card">
                    <label>Target Power</label>
                    <div class="value">330 MW</div>
                </div>
                <div class="info-card">
                    <label>Data Date</label>
                    <div class="value">10 Dec 2025</div>
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-btn active" onclick="switchTab('schedule')">Design IAP Schedule</button>
            <button class="tab-btn" onclick="switchTab('report')">Weekly Construction Report</button>
        </div>

        <!-- Schedule Tab -->
        <div class="tab-panel active" id="tab-schedule">
        <div class="controls">
            <button class="filter-btn active" data-filter="all">All Phases</button>
            <button class="filter-btn" data-filter="milestones">Milestones</button>
            <button class="filter-btn" data-filter="design">Design</button>
            <button class="filter-btn" data-filter="procurement">Procurement</button>
            <button class="filter-btn" data-filter="construction">Construction</button>
            <button class="filter-btn" data-filter="power">Power</button>
        </div>

        <div class="rag-legend">
            <span class="rag-legend-title">RAG Status:</span>
            <div class="rag-item"><div class="rag-dot red"></div> Red - At Risk</div>
            <div class="rag-item"><div class="rag-dot amber"></div> Amber - Caution</div>
            <div class="rag-item"><div class="rag-dot green"></div> Green - On Track</div>
            <div class="rag-item"><div class="rag-dot none"></div> Not Set</div>
            <span style="margin-left: auto; font-size: 0.75rem; color: #8a877d;">Click task name or RAG to add comments</span>
        </div>

        <div class="legend">
            <div class="legend-item"><div class="legend-color" style="background: linear-gradient(90deg, #6a9bcc, #89b3d9);"></div>Design</div>
            <div class="legend-item"><div class="legend-color" style="background: linear-gradient(90deg, #4a7fa8, #6a9bcc);"></div>Procurement</div>
            <div class="legend-item"><div class="legend-color" style="background: linear-gradient(90deg, #d97757, #e8a87c);"></div>Substation</div>
            <div class="legend-item"><div class="legend-color" style="background: linear-gradient(90deg, #788c5d, #92a878);"></div>Site Work</div>
            <div class="legend-item"><div class="legend-color" style="background: linear-gradient(90deg, #5889b0, #7aa5c8);"></div>Construction</div>
            <div class="legend-item"><div class="legend-color" style="background: linear-gradient(90deg, #7aa5c8, #9bbdda);"></div>Vertiv</div>
            <div class="legend-item"><div class="legend-color" style="background: linear-gradient(90deg, #c4694e, #d97757);"></div>Commissioning</div>
            <div class="legend-item"><div class="legend-color" style="background: linear-gradient(90deg, #788c5d, #92a878);"></div>Power</div>
            <div class="legend-item"><div style="width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-bottom:12px solid #d97757;display:inline-block;"></div>Milestone</div>
            <div class="legend-item"><div style="width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-bottom:12px solid #788c5d;display:inline-block;"></div>Complete</div>
        </div>

        <div class="gantt-container">
            <div class="gantt-header">
                <div class="rag-header">RAG</div>
                <div class="task-header">Task Name</div>
                <div class="timeline-header" id="timeline-header"></div>
            </div>
            <div class="gantt-body" id="gantt-body"></div>
        </div>

        <!-- Summary Section -->
        <div class="summary-section">
            <div class="summary-card">
                <h3 class="summary-title" style="color: #788c5d;">Permanent Power Staging</h3>
                <div class="summary-item"><span>50 MW</span><span class="summary-date">Jul 06, 2026</span></div>
                <div class="summary-item"><span>100 MW</span><span class="summary-date">Aug 03, 2026</span></div>
                <div class="summary-item"><span>150 MW</span><span class="summary-date">Sep 08, 2026</span></div>
                <div class="summary-item"><span>200 MW</span><span class="summary-date">Oct 05, 2026</span></div>
                <div class="summary-item"><span>250 MW</span><span class="summary-date">Nov 02, 2026</span></div>
                <div class="summary-item"><span>330 MW</span><span class="summary-date">Dec 01, 2026</span></div>
            </div>

            <div class="summary-card">
                <h3 class="summary-title" style="color: #d97757;">Key Milestones</h3>
                <div class="summary-item"><span>&#10003; Limited NTP</span><span class="summary-date">Oct 16, 2025</span></div>
                <div class="summary-item"><span>&#10003; Design Build Agreement</span><span class="summary-date">Dec 16, 2025</span></div>
                <div class="summary-item"><span>MOB to Site</span><span class="summary-date">Feb 02, 2026</span></div>
                <div class="summary-item"><span>Begin Construction</span><span class="summary-date">Feb 10, 2026</span></div>
                <div class="summary-item"><span>3D Model Frozen</span><span class="summary-date">Mar 24, 2026</span></div>
                <div class="summary-item"><span>Engineering IFC</span><span class="summary-date">Jul 02, 2026</span></div>
                <div class="summary-item"><span>Project Completion</span><span class="summary-date">Sep 30, 2027</span></div>
            </div>

            <div class="summary-card">
                <h3 class="summary-title" style="color: #6a9bcc;">Vertiv Design Milestones</h3>
                <div class="summary-item"><span>BOD Set Submittal</span><span class="summary-date">Jan 12, 2026</span></div>
                <div class="summary-item"><span>fGMP Proposal</span><span class="summary-date">Mar 02, 2026</span></div>
                <div class="summary-item"><span>DD Set Submittal</span><span class="summary-date">Mar 16, 2026</span></div>
                <div class="summary-item"><span>CD Set Submittal</span><span class="summary-date">May 11, 2026</span></div>
                <div class="summary-item"><span>Start Up Complete</span><span class="summary-date">May 18, 2026</span></div>
                <div class="summary-item"><span>Installation Complete</span><span class="summary-date">Jul 06, 2026</span></div>
            </div>
        </div>
        </div> <!-- end tab-schedule -->

        <!-- Weekly Report Tab -->
        <div class="tab-panel" id="tab-report">

            <div class="report-header-bar">
                <h2>Tranche 3a — MSY01</h2>
                <div class="report-meta">
                    <span>Week Ending <strong>02/06/26</strong></span>
                    <span>Fluidstack &amp; HUT 8</span>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="report-kpi-row" style="margin-bottom:24px">
                <div class="report-kpi">
                    <div class="kpi-value">0</div>
                    <div class="kpi-label">Safety Incidents</div>
                </div>
                <div class="report-kpi">
                    <div class="kpi-value">122</div>
                    <div class="kpi-label">Project Hours</div>
                </div>
                <div class="report-kpi">
                    <div class="kpi-value">7</div>
                    <div class="kpi-label">Workers On-site</div>
                </div>
                <div class="report-kpi">
                    <div class="kpi-value">85%</div>
                    <div class="kpi-label">Procurement Complete</div>
                </div>
                <div class="report-kpi">
                    <div class="kpi-value">100%</div>
                    <div class="kpi-label">Inspection Pass Rate</div>
                </div>
                <div class="report-kpi">
                    <div class="kpi-value" style="color:#d97757">2</div>
                    <div class="kpi-label">High-Priority Risks</div>
                </div>
            </div>

            <!-- 1. Executive Summary -->
            <div class="report-section">
                <div class="report-section-title">
                    <div class="section-icon" style="background:rgba(217,119,87,0.15);color:#d97757;">1</div>
                    Executive Summary
                </div>

                <div class="report-highlight">
                    The RB1 project successfully completed its kickoff week with mobilization and 30% design milestone achieved, on schedule. The facility will be delivered in four phased data halls with the first hall reaching early floor access in November 2026 and final phase commissioning in mid-2027. Foundation work has commenced with Cajun's piling team onsite (7 workers, 122 project hours), currently installing test piles with results expected February 13th. Design coordination is progressing well with teams actively resolving scope gaps and clashes, while procurement is 85% complete with buyout nearing closure. Two high-priority risks require immediate attention: Vertiv LLE delivery schedule confirmation needed by February 13th, and IFC design package completion by April 2026 requiring additional resources and strategic early releases. Weather conditions have caused minor delays (+2 days on test piles) but the overall project remains on schedule with no safety incidents or quality issues reported.
                </div>

                <h4 style="font-size:0.9rem;color:#6a9bcc;margin:20px 0 12px;font-weight:600;">Week in Review — Highlights & Wins</h4>
                <ul class="report-list">
                    <li>Kickoff meeting completed — project teams met, deliverables and expectations shared</li>
                    <li>Design teams began resolving potential scope gaps and design clashes</li>
                    <li>Buyout is nearing completion</li>
                </ul>

                <h4 style="font-size:0.9rem;color:#f87171;margin:20px 0 12px;font-weight:600;">Key Risks</h4>
                <ul class="report-list">
                    <li>Vertiv LLE not arriving in time</li>
                    <li>IFC schedule not completed by April 2026</li>
                    <li>Test pile failures</li>
                </ul>
            </div>

            <!-- EFA / RFS Table -->
            <div class="report-section">
                <div class="report-section-title">
                    <div class="section-icon" style="background:rgba(106,155,204,0.15);color:#6a9bcc;">E</div>
                    Best Estimate — Early Floor Access &amp; Ready for Service
                </div>
                <div style="overflow-x:auto;">
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>Phase</th>
                            <th>Target Early Access</th>
                            <th>Target Floor Access</th>
                            <th>Target Commencement</th>
                            <th>Critical Power (MW)</th>
                            <th>Data Hall</th>
                            <th>Sq Ft</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>11/18/26</td><td>12/18/26</td><td>02/01/27</td><td>65</td><td>1</td><td>73,080</td></tr>
                        <tr><td>2</td><td>12/30/26</td><td>01/29/27</td><td>03/15/27</td><td>60</td><td>2</td><td>61,712</td></tr>
                        <tr><td>3</td><td>02/16/27</td><td>03/18/27</td><td>05/02/27</td><td>60</td><td>3</td><td>61,712</td></tr>
                        <tr><td>4</td><td>03/31/27</td><td>04/30/27</td><td>06/14/27</td><td>60</td><td>4</td><td>61,712</td></tr>
                    </tbody>
                </table>
                </div>
            </div>

            <!-- 2. Safety -->
            <div class="report-section">
                <div class="report-section-title">
                    <div class="section-icon" style="background:rgba(120,140,93,0.15);color:#92a878;">2</div>
                    Safety
                </div>
                <div class="report-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                    <div class="report-stat-card">
                        <div class="stat-label">Recordables</div>
                        <div class="stat-value" style="color:#92a878">None</div>
                    </div>
                    <div class="report-stat-card">
                        <div class="stat-label">Project Hours</div>
                        <div class="stat-value">122</div>
                    </div>
                    <div class="report-stat-card">
                        <div class="stat-label">Manpower</div>
                        <div class="stat-value">7</div>
                        <div class="stat-sub">All pile installation workers</div>
                    </div>
                    <div class="report-stat-card">
                        <div class="stat-label">Weather</div>
                        <div class="stat-value" style="font-size:1.1rem">Rain, 40s–60s°F</div>
                        <div class="stat-sub">Scattered showers</div>
                    </div>
                </div>
            </div>

            <!-- 3. Design -->
            <div class="report-section">
                <div class="report-section-title">
                    <div class="section-icon" style="background:rgba(106,155,204,0.15);color:#6a9bcc;">3</div>
                    Design
                </div>
                <h4 style="font-size:0.85rem;color:#b0aea5;margin-bottom:10px;font-weight:600;">STATUS</h4>
                <p style="font-size:0.9rem;color:#cbd5e1;margin-bottom:16px;line-height:1.6;">DD phase with strategic release of current work for foundations, structural slab on grade, and steel.</p>

                <h4 style="font-size:0.85rem;color:#b0aea5;margin:16px 0 10px;font-weight:600;">UPCOMING DELIVERABLES</h4>
                <ul class="report-list">
                    <li>Jacobs to submit revised mechanical and electrical designs — Due 02/16/26</li>
                    <li>HUT8, Jacobs, and FS to coordinate in-person design meeting in Austin, TX</li>
                </ul>

                <h4 style="font-size:0.85rem;color:#b0aea5;margin:16px 0 10px;font-weight:600;">KEY OPEN RFIs &amp; SUBMITTALS</h4>
                <ul class="report-list">
                    <li>Vertiv Mechanical submittal (02/02/26) — under review — Bradley Brown (Jacobs)</li>
                    <li>Vertiv Piping submittal (02/02/26) — under review — Bradley Brown (Jacobs)</li>
                    <li>RFI 23 — requested complete floor plan — currently in Graycor court</li>
                </ul>
            </div>

            <!-- 4. Schedule -->
            <div class="report-section">
                <div class="report-section-title">
                    <div class="section-icon" style="background:rgba(217,119,87,0.15);color:#d97757;">4</div>
                    Schedule
                </div>

                <h4 style="font-size:0.85rem;color:#b0aea5;margin-bottom:12px;font-weight:600;">KEY MILESTONES</h4>
                <div style="overflow-x:auto;">
                <table class="report-table">
                    <thead>
                        <tr><th>Milestone</th><th>Baseline</th><th>Forecast</th><th>Variance</th><th>Status</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Mobilization Complete</td><td>1/27/2026</td><td>1/27/2026</td><td>On Time</td><td><span class="report-badge badge-complete">✓ Complete</span></td></tr>
                        <tr><td>Test Pile Installation</td><td>2/10/2026</td><td>2/12/2026</td><td style="color:#d97757">+2 days</td><td><span class="report-badge badge-progress">In Progress</span></td></tr>
                        <tr><td>DD Design Complete</td><td>2/6/2026</td><td>2/6/2026</td><td>On Time</td><td><span class="report-badge badge-complete">✓ Complete</span></td></tr>
                        <tr><td>Foundation IFC Drawings</td><td>3/15/2026</td><td>3/15/2026</td><td>On Track</td><td><span class="report-badge badge-upcoming">Upcoming</span></td></tr>
                        <tr><td>Structural Steel IFC</td><td>3/22/2026</td><td>3/22/2026</td><td>On Track</td><td><span class="report-badge badge-upcoming">Upcoming</span></td></tr>
                        <tr><td>Full IFC Package</td><td>4/30/2026</td><td>4/30/2026</td><td style="color:#e06050">At Risk</td><td><span class="report-badge badge-risk">Monitoring</span></td></tr>
                        <tr><td>Building Foundation</td><td>6/15/2026</td><td>TBD</td><td>TBD</td><td><span class="report-badge badge-planning">Planning</span></td></tr>
                        <tr><td>Data Hall 1 EFA</td><td>9/30/2026</td><td>9/30/2026</td><td>On Track</td><td><span class="report-badge badge-planning">Planning</span></td></tr>
                        <tr><td>Data Hall 1 RFS</td><td>12/15/2026</td><td>12/15/2026</td><td>On Track</td><td><span class="report-badge badge-planning">Planning</span></td></tr>
                    </tbody>
                </table>
                </div>

                <h4 style="font-size:0.85rem;color:#b0aea5;margin:24px 0 12px;font-weight:600;">3-WEEK LOOKAHEAD</h4>

                <div class="lookahead-week">
                    <h4>Week 1: February 7–13, 2026</h4>
                    <div class="lookahead-category">
                        <h5>Piling Operations</h5>
                        <ul>
                            <li>Complete test pile installation (4 remaining)</li>
                            <li>Conduct load testing on initial test piles</li>
                            <li>Cajun crew (7 workers) continues production piling</li>
                            <li>Target: 15–20 production piles installed</li>
                        </ul>
                    </div>
                    <div class="lookahead-category">
                        <h5>Design Activities</h5>
                        <ul>
                            <li>Coordinate design clash resolution meeting (02/10)</li>
                            <li>Jacobs submits revised org charts (target 02/16)</li>
                            <li>Continue foundation and structural steel design development</li>
                        </ul>
                    </div>
                    <div class="lookahead-category">
                        <h5>Procurement</h5>
                        <ul>
                            <li>Finalize remaining buyout packages (structural steel, precast panels)</li>
                            <li>Track Vertiv LLE delivery commitment</li>
                            <li><strong style="color:#d97757;">Key Deliverable:</strong> Test pile results expected 02/13</li>
                        </ul>
                    </div>
                </div>

                <div class="lookahead-week">
                    <h4>Week 2: February 14–20, 2026</h4>
                    <div class="lookahead-category">
                        <h5>Piling Operations</h5>
                        <ul>
                            <li>Continue production piling based on test results</li>
                            <li>Begin layout for building foundation areas</li>
                        </ul>
                    </div>
                    <div class="lookahead-category">
                        <h5>Design Activities</h5>
                        <ul>
                            <li>In-person design coordination meeting 2/19/26 in Austin, TX (HUT8, Jacobs, FS)</li>
                            <li>Reviewing (approval) Vertiv mechanical and piping submittals</li>
                            <li>Release additional foundation drawings for bidding</li>
                        </ul>
                    </div>
                    <div class="lookahead-category">
                        <h5>Procurement</h5>
                        <ul>
                            <li>Award structural steel package</li>
                            <li>Continue precast panel negotiations</li>
                            <li>Schedule first foundation inspection with third-party testing agency</li>
                        </ul>
                    </div>
                </div>

                <div class="lookahead-week">
                    <h4>Week 3: February 21–27, 2026</h4>
                    <div class="lookahead-category">
                        <h5>Piling Operations</h5>
                        <ul>
                            <li>Production piling continues (weather permitting)</li>
                            <li>Target: Complete 40% of total pile count</li>
                            <li>Begin pile cap excavation in completed areas</li>
                        </ul>
                    </div>
                    <div class="lookahead-category">
                        <h5>Design Activities</h5>
                        <ul>
                            <li>Implement decisions from Austin design meeting</li>
                            <li>Release slab-on-grade design for early bidding</li>
                            <li>Progress electrical distribution design to 50%</li>
                        </ul>
                    </div>
                    <div class="lookahead-category">
                        <h5>Site Activities</h5>
                        <ul>
                            <li>Survey crew mobilization for building layout</li>
                            <li>Establish construction laydown areas</li>
                            <li>Install temporary power and site facilities</li>
                        </ul>
                    </div>
                </div>

                <h4 style="font-size:0.85rem;color:#b0aea5;margin:24px 0 12px;font-weight:600;">ACCELERATION STRATEGIES</h4>
                <div class="report-grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));">
                    <div class="accel-card">
                        <div class="accel-num">1</div>
                        <p>Utilize MC cable for all LV installation</p>
                    </div>
                    <div class="accel-card">
                        <div class="accel-num">2</div>
                        <p>Utilize Quick Disconnects (QD) for Precast Panel installation</p>
                    </div>
                    <div class="accel-card">
                        <div class="accel-num">3</div>
                        <p>Coordinate sequential work concurrently — don't wait for scopes to complete, chase work</p>
                    </div>
                    <div class="accel-card">
                        <div class="accel-num">4</div>
                        <p>Release design to trades for early work</p>
                    </div>
                </div>
            </div>

            <!-- 5. Quality & Commissioning -->
            <div class="report-section">
                <div class="report-section-title">
                    <div class="section-icon" style="background:rgba(217,119,87,0.12);color:#e8a87c;">5</div>
                    Quality &amp; Commissioning
                </div>

                <h4 style="font-size:0.85rem;color:#b0aea5;margin-bottom:10px;font-weight:600;">QUALITY ACTIVITIES THIS WEEK</h4>
                <ul class="report-list">
                    <li>Conducted pre-construction quality meeting with Cajun piling subcontractor</li>
                    <li>Reviewed and approved pile installation work plan and QC procedures</li>
                    <li>Established pile installation inspection protocol with third-party geotechnical engineer</li>
                    <li>Documented baseline site conditions with photo survey</li>
                    <li>Reviewing Vertiv mechanical and piping submittals for code compliance</li>
                    <li>No quality incidents reported</li>
                </ul>

                <h4 style="font-size:0.85rem;color:#b0aea5;margin:20px 0 12px;font-weight:600;">QA/QC METRICS</h4>
                <div class="report-kpi-row">
                    <div class="report-kpi">
                        <div class="kpi-value">3 / 3</div>
                        <div class="kpi-label">Inspections Complete</div>
                    </div>
                    <div class="report-kpi">
                        <div class="kpi-value">100%</div>
                        <div class="kpi-label">Pass Rate</div>
                    </div>
                    <div class="report-kpi">
                        <div class="kpi-value">2</div>
                        <div class="kpi-label">Submittals Received</div>
                    </div>
                    <div class="report-kpi">
                        <div class="kpi-value" style="color:#d97757">0</div>
                        <div class="kpi-label">Submittals Approved</div>
                    </div>
                </div>

                <h4 style="font-size:0.85rem;color:#b0aea5;margin:20px 0 10px;font-weight:600;">COMMISSIONING PLANNING</h4>
                <ul class="report-list">
                    <li>Commissioning agent contract finalization in progress</li>
                    <li>Preliminary commissioning plan development initiated</li>
                    <li>Coordinating with Vertiv on factory testing requirements and protocols</li>
                    <li>Reviewing owner's equipment testing and acceptance criteria</li>
                </ul>

                <h4 style="font-size:0.85rem;color:#b0aea5;margin:20px 0 10px;font-weight:600;">DEFICIENCIES / NON-CONFORMANCES</h4>
                <p style="font-size:0.9rem;color:#92a878;">None reported.</p>
            </div>

            <!-- 6. Risks and Issues -->
            <div class="report-section">
                <div class="report-section-title">
                    <div class="section-icon" style="background:rgba(192,57,43,0.15);color:#e06050;">6</div>
                    Major Risks &amp; Issues
                </div>
                <div style="overflow-x:auto;">
                <table class="report-table">
                    <thead>
                        <tr><th>#</th><th>Risk Description</th><th>Prob</th><th>Impact</th><th>Score</th><th>Mitigation Strategy</th><th>Owner</th><th>Status</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td><td>Vertiv LLE late delivery impacts critical path</td><td>Med</td><td>High</td>
                            <td><span class="risk-score-high">HIGH</span></td>
                            <td>Expedite procurement, identify alternatives, adjust sequence</td>
                            <td>Jacobs / Atlas</td>
                            <td><span class="report-badge badge-open">Open</span></td>
                        </tr>
                        <tr>
                            <td>2</td><td>IFC design not complete by April 2026</td><td>Med</td><td>High</td>
                            <td><span class="risk-score-high">HIGH</span></td>
                            <td>Add resources, early releases, weekly reviews</td>
                            <td>Jacobs</td>
                            <td><span class="report-badge badge-open">Open</span></td>
                        </tr>
                        <tr>
                            <td>3</td><td>Test piles fail load testing</td><td>Low</td><td>High</td>
                            <td><span class="risk-score-med">MED</span></td>
                            <td>Conservative design, engineer oversight, contingency ready</td>
                            <td>Cajun / Jacobs</td>
                            <td><span class="report-badge badge-monitor">Monitor</span></td>
                        </tr>
                        <tr>
                            <td>4</td><td>Weather delays foundation schedule</td><td>High</td><td>Med</td>
                            <td><span class="risk-score-med">MED</span></td>
                            <td>Build float, drainage prep, forecast monitoring</td>
                            <td>RB1 / Cajun</td>
                            <td><span class="report-badge badge-active">Active</span></td>
                        </tr>
                        <tr>
                            <td>5</td><td>Design clashes delay drawings</td><td>Med</td><td>Med</td>
                            <td><span class="risk-score-med">MED</span></td>
                            <td>Enhanced coordination, 3D clash detection, weekly meetings</td>
                            <td>Jacobs / FS</td>
                            <td><span class="report-badge badge-active">Active</span></td>
                        </tr>
                        <tr>
                            <td>6</td><td>Electrical gear delivery delays energization</td><td>Low</td><td>High</td>
                            <td><span class="risk-score-med">MED</span></td>
                            <td>Early procurement, weekly tracking, expediting options</td>
                            <td>Atlas / RB1</td>
                            <td><span class="report-badge badge-monitor">Monitor</span></td>
                        </tr>
                        <tr>
                            <td>7</td><td>Labor availability for peak periods</td><td>Med</td><td>Med</td>
                            <td><span class="risk-score-med">MED</span></td>
                            <td>Early planning, incentives, regional recruiting, prefab</td>
                            <td>RB1 / Subs</td>
                            <td><span class="report-badge badge-planning">Planning</span></td>
                        </tr>
                    </tbody>
                </table>
                </div>
            </div>

        </div> <!-- end tab-report -->
    </div> <!-- end container -->

    <!-- Tooltip -->
    <div class="tooltip" id="tooltip">
        <div class="tooltip-title"></div>
        <div class="tooltip-content"></div>
    </div>

    <!-- Edit Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal">
            <h3 id="modal-title">Edit Task</h3>
            <div class="input-group">
                <label>RAG Status</label>
                <div class="rag-select-group">
                    <div class="rag-option red" data-rag="red" onclick="selectRag('red')">
                        <div class="rag-option-dot"></div>
                        <div class="rag-option-label">Red</div>
                    </div>
                    <div class="rag-option amber" data-rag="amber" onclick="selectRag('amber')">
                        <div class="rag-option-dot"></div>
                        <div class="rag-option-label">Amber</div>
                    </div>
                    <div class="rag-option green" data-rag="green" onclick="selectRag('green')">
                        <div class="rag-option-dot"></div>
                        <div class="rag-option-label">Green</div>
                    </div>
                    <div class="rag-option none" data-rag="none" onclick="selectRag('none')">
                        <div class="rag-option-dot"></div>
                        <div class="rag-option-label">None</div>
                    </div>
                </div>
            </div>
            <div class="input-group">
                <label>Comments / Notes</label>
                <textarea id="modal-comment" placeholder="Add notes about this task status..."></textarea>
            </div>
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button class="btn-save" onclick="saveTask()">Save</button>
            </div>
        </div>
    </div>

    <script>
        var monthWidth = 55;
        var totalMonths = 25;
        var currentTaskId = null;
        var selectedRag = 'none';
        var taskData = {};
        var todayOffset = 4.39;

        var tasks = [
            // ===== MILESTONES - PROJECT =====
            { id: 'ms_proj', name: 'MILESTONES - PROJECT', phase: 'milestones', isPhase: true },
            { id: 'ms_p1', name: 'Master Site Planning FROZEN', start: 1.7, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Nov 21, 2025', pctComplete: 100 },
            { id: 'ms_p2', name: 'Architectural Office Programming Complete', start: 1.7, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Nov 21, 2025', pctComplete: 100 },
            { id: 'ms_p3', name: 'Architectural Office Programming Update', start: 3.5, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Jan 16, 2026', pctComplete: 0 },
            { id: 'ms_p4', name: '3D MODEL FROZEN (BOD Layout)', start: 5.8, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Mar 24, 2026', pctComplete: 0 },

            // ===== MILESTONES - JACOBS =====
            { id: 'ms_jac', name: 'MILESTONES - JACOBS', phase: 'milestones', isPhase: true },
            { id: 'ms_j1', name: 'Award Vertiv iGMP PO', start: 2.2, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Dec 17, 2025', pctComplete: 100 },
            { id: 'ms_j2', name: 'Interactive Schedule Workshop w/Vertiv & HUT8', start: 2.2, duration: 0.3, type: 'vertiv', phase: 'milestones', indent: 1, date: 'Dec 16-19, 2025', pctComplete: 100 },
            { id: 'ms_j3', name: 'Interactive Design Workshop W-MEC/ELE & CSA', start: 3.2, duration: 0.15, type: 'design', phase: 'milestones', indent: 1, date: 'Jan 07-08, 2026', pctComplete: 0 },
            { id: 'ms_j4', name: 'Master Site Planning FROZEN (Fluid Stack)', start: 3.5, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Jan 16, 2026', pctComplete: 0 },
            { id: 'ms_j5', name: 'MOB to Site', start: 4.1, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Feb 02, 2026', pctComplete: 0 },
            { id: 'ms_j6', name: 'Develop MTO (Model & Manual)', start: 4.2, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Feb 05, 2026', pctComplete: 0 },
            { id: 'ms_j7', name: 'Prepare TIC Cost Estimate', start: 4.2, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Feb 05, 2026', pctComplete: 0 },
            { id: 'ms_j8', name: 'TIC Cost Estimate Complete', start: 5.2, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Mar 05, 2026', pctComplete: 0 },
            { id: 'ms_j9', name: 'TIC Cost Estimate Mgmt Review w/ HUT8', start: 5.4, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Mar 12, 2026', pctComplete: 0 },
            { id: 'ms_j10', name: 'fGMP Proposal', start: 5.5, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Mar 16, 2026', pctComplete: 0 },
            { id: 'ms_j11', name: 'Engineering 50% Complete', start: 5.5, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Mar 16, 2026', pctComplete: 0 },
            { id: 'ms_j12', name: 'Engineering 90% Complete', start: 7.4, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'May 11, 2026', pctComplete: 0 },
            { id: 'ms_j13', name: 'Engineering IFC Complete', start: 9.1, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Jul 02, 2026', pctComplete: 0 },
            { id: 'ms_j14', name: 'JACOBS DEMOB', start: 23, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Sep 30, 2027', pctComplete: 0 },

            // ===== MILESTONES - HUT 8 =====
            { id: 'ms_h8', name: 'MILESTONES - HUT 8', phase: 'milestones', isPhase: true },
            { id: 'ms_h1', name: 'Data Hall RFP', start: 0, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Oct 10, 2025', pctComplete: 100 },
            { id: 'ms_h2', name: 'Data Hall Limited NTP', start: 0.2, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Oct 16, 2025', pctComplete: 100 },
            { id: 'ms_h3', name: 'Data Hall RFP Proposal', start: 0.7, duration: 0.8, type: 'construction', phase: 'milestones', indent: 1, date: 'Oct 31 - Nov 25, 2025', pctComplete: 100 },
            { id: 'ms_h4', name: 'Data Hall Design Build Agreement', start: 2.2, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Dec 16, 2025', pctComplete: 100 },
            { id: 'ms_h5', name: 'Data Hall Begin Construction', start: 4.3, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Feb 10, 2026', pctComplete: 0 },
            { id: 'ms_h6', name: 'Substation Transformer Fdn Ready', start: 4.9, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Mar 02, 2026', pctComplete: 0 },
            { id: 'ms_h7', name: 'Data Hall Project Completion - Handover', start: 23, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Sep 30, 2027', pctComplete: 0 },

            // ===== MILESTONES - VERTIV =====
            { id: 'ms_vtv', name: 'MILESTONES - VERTIV', phase: 'milestones', isPhase: true },
            { id: 'ms_v1', name: 'BOD Set Submittal', start: 3.4, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Jan 12, 2026', pctComplete: 0 },
            { id: 'ms_v2', name: 'fGMP Proposal (Vertiv)', start: 4.9, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Mar 02, 2026', pctComplete: 0 },
            { id: 'ms_v3', name: 'DD Set Submittal', start: 5.5, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Mar 16, 2026', pctComplete: 0 },
            { id: 'ms_v4', name: 'DD Set Review', start: 5.5, duration: 0.3, type: 'vertiv', phase: 'milestones', indent: 1, date: 'Mar 16-24, 2026', pctComplete: 0 },
            { id: 'ms_v5', name: 'CD Set Submittal', start: 7.4, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'May 11, 2026', pctComplete: 0 },
            { id: 'ms_v6', name: 'CD Set Review', start: 7.4, duration: 0.25, type: 'vertiv', phase: 'milestones', indent: 1, date: 'May 11-18, 2026', pctComplete: 0 },
            { id: 'ms_v7', name: 'Start Up Complete', start: 7.6, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'May 18, 2026', pctComplete: 0 },
            { id: 'ms_v8', name: 'Installation Complete', start: 9.2, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Jul 06, 2026', pctComplete: 0 },

            // ===== MILESTONES - CONSTRUCTION =====
            { id: 'ms_con', name: 'MILESTONES - CONSTRUCTION', phase: 'milestones', isPhase: true },
            { id: 'ms_c1', name: 'DC Pad Topsoil Stripping & Stabilization', start: 3.5, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Jan 16, 2026', pctComplete: 0 },
            { id: 'ms_c2', name: 'Test Pile Program Complete', start: 4.2, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Feb 06, 2026', pctComplete: 0 },
            { id: 'ms_c3', name: 'Stone Pad Turnover - DC Bldg', start: 5.2, duration: 0.5, type: 'milestone', phase: 'milestones', indent: 1, isMilestone: true, date: 'Mar 06, 2026', pctComplete: 0 },

            // ===== PERMANENT POWER =====
            { id: 'pwr_ph', name: 'PERMANENT POWER STAGING', phase: 'power', isPhase: true },
            { id: 'pwr1', name: 'Permanent Power - 50MW', start: 9.2, duration: 0.5, type: 'milestone', phase: 'power', indent: 1, isMilestone: true, date: 'Jul 06, 2026', pctComplete: 0 },
            { id: 'pwr2', name: 'Permanent Power - 100MW', start: 10.1, duration: 0.5, type: 'milestone', phase: 'power', indent: 1, isMilestone: true, date: 'Aug 03, 2026', pctComplete: 0 },
            { id: 'pwr3', name: 'Permanent Power - 150MW', start: 11.3, duration: 0.5, type: 'milestone', phase: 'power', indent: 1, isMilestone: true, date: 'Sep 08, 2026', pctComplete: 0 },
            { id: 'pwr4', name: 'Permanent Power - 200MW', start: 12.2, duration: 0.5, type: 'milestone', phase: 'power', indent: 1, isMilestone: true, date: 'Oct 05, 2026', pctComplete: 0 },
            { id: 'pwr5', name: 'Permanent Power - 250MW', start: 13.1, duration: 0.5, type: 'milestone', phase: 'power', indent: 1, isMilestone: true, date: 'Nov 02, 2026', pctComplete: 0 },
            { id: 'pwr6', name: 'Permanent Power - 330MW', start: 14, duration: 0.5, type: 'milestone', phase: 'power', indent: 1, isMilestone: true, date: 'Dec 01, 2026', pctComplete: 0 },

            // ===== DESIGN REQUIREMENTS =====
            { id: 'd_req', name: 'DESIGN REQUIREMENTS', phase: 'design', isPhase: true },
            { id: 'd_r1', name: 'Preliminary Basis of Design', start: 0.2, duration: 1, type: 'design', phase: 'design', indent: 1, pctComplete: 100 },
            { id: 'd_r2', name: 'Civil Basis of Design', start: 0.5, duration: 0.2, type: 'design', phase: 'design', indent: 1, pctComplete: 100 },
            { id: 'd_r3', name: 'IFB Unit-Rate Test Piling Bid Package', start: 0.7, duration: 0.7, type: 'design', phase: 'design', indent: 1, pctComplete: 100 },
            { id: 'd_r4', name: 'Arch LS & Egress / Code Study', start: 0.7, duration: 2.8, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_r5', name: 'DC Materials of Construction Confirmed', start: 1.6, duration: 0.5, type: 'milestone', phase: 'design', indent: 1, isMilestone: true, date: 'Nov 19, 2025', pctComplete: 100 },

            // ===== DESIGN - CIVIL =====
            { id: 'd_civ', name: 'DESIGN - CIVIL', phase: 'design', isPhase: true },
            { id: 'd_c1', name: 'Early Works Civil Rough Grading', start: 2, duration: 2.4, type: 'design', phase: 'design', indent: 1, pctComplete: 5 },
            { id: 'd_c2', name: 'Site Civil Underground & Infrastructure', start: 4.3, duration: 1.8, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_c3', name: 'Civil Final Grading & Paving', start: 5.8, duration: 1.7, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - STRUCTURAL =====
            { id: 'd_str', name: 'DESIGN - STRUCTURAL', phase: 'design', isPhase: true },
            { id: 'd_s1', name: 'General Specs / Notes / Details', start: 0.7, duration: 3.3, type: 'design', phase: 'design', indent: 1, pctComplete: 10 },
            { id: 'd_s2', name: 'Steel Bldg - Admin, Core & DH1', start: 2.7, duration: 1.3, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_s3', name: 'Steel Bldg - DH 2-4', start: 3.8, duration: 1.1, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_s4', name: 'Building Piling', start: 0.7, duration: 3.9, type: 'design', phase: 'design', indent: 1, pctComplete: 5 },
            { id: 'd_s5', name: 'Building Foundation', start: 2, duration: 2.8, type: 'design', phase: 'design', indent: 1, pctComplete: 5 },
            { id: 'd_s6', name: 'Ext Trestle Piling', start: 3, duration: 1.8, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_s7', name: 'Ext Trestle Steel & Concrete', start: 3, duration: 2, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_s8', name: 'Yard Concrete / Ext Slab on Grade', start: 3.6, duration: 1.9, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_s9', name: 'Building Slab on Grade', start: 3.6, duration: 1.9, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_s10', name: 'Ext Pre Cast Siding', start: 6.7, duration: 1.3, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_s11', name: 'Int Walls / Misc Steel', start: 6.2, duration: 3.2, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - ARCHITECTURAL =====
            { id: 'd_arch', name: 'DESIGN - ARCHITECTURAL', phase: 'design', isPhase: true },
            { id: 'd_a1', name: 'Core and Shell', start: 3.4, duration: 2.5, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_a2', name: 'Permitting Drawings', start: 5.3, duration: 3.7, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_a3', name: 'Admin, Core & Data Hall 1', start: 4.5, duration: 3.8, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_a4', name: 'Data Halls 2-4', start: 7.2, duration: 2, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - MECHANICAL =====
            { id: 'd_mech', name: 'DESIGN - MECHANICAL / HVAC', phase: 'design', isPhase: true },
            { id: 'd_m1', name: 'HVAC Equipment & Specs', start: 5.5, duration: 1.9, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_m2', name: 'HVAC Airside & Piping', start: 5.5, duration: 1.9, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_m3', name: 'HVAC Admin/Office', start: 7.2, duration: 2.3, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_m4', name: 'Mechanical General Specs', start: 8, duration: 1.5, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - ELECTRICAL =====
            { id: 'd_elec', name: 'DESIGN - ELECTRICAL', phase: 'design', isPhase: true },
            { id: 'd_e1', name: 'Site Routing (substa to DC swgr)', start: 2, duration: 3.5, type: 'design', phase: 'design', indent: 1, pctComplete: 5 },
            { id: 'd_e2', name: 'General Specs / Notes / Details', start: 3.6, duration: 5.7, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_e3', name: 'Long Lead Electrical Equipment', start: 3.4, duration: 3, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_e4', name: 'Early Works U/G Utilities', start: 3.6, duration: 3.1, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_e5', name: 'Admin, Data Hall 1', start: 4.8, duration: 4.9, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_e6', name: 'Site Lighting and Power', start: 6.9, duration: 2.9, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_e7', name: 'Data Halls 2-4', start: 8.3, duration: 2.6, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - FIRE PROTECTION =====
            { id: 'd_fp', name: 'DESIGN - FIRE PROTECTION', phase: 'design', isPhase: true },
            { id: 'd_f1', name: 'FP General Specs', start: 3, duration: 1.4, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_f2', name: 'Fire Water Storage Tank', start: 3.4, duration: 1.8, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_f3', name: 'FP/LS Admin, Core & DH1', start: 3.6, duration: 1.7, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_f4', name: 'FP/LS Data Hall 2-4', start: 3.9, duration: 1.7, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - LIFE SAFETY =====
            { id: 'd_ls', name: 'DESIGN - LIFE SAFETY', phase: 'design', isPhase: true },
            { id: 'd_l1', name: 'LS Specifications', start: 3.6, duration: 1, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_l2', name: 'LS - Data Hall 1', start: 5, duration: 3, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_l3', name: 'LS - Admin & Spine', start: 5.9, duration: 1.7, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_l4', name: 'LS - Data Hall 2-4', start: 7.6, duration: 1.6, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - TELECOM / ICT =====
            { id: 'd_ict', name: 'DESIGN - TELECOM / ICT', phase: 'design', isPhase: true },
            { id: 'd_t1', name: 'Telecom General Specs', start: 2, duration: 3, type: 'design', phase: 'design', indent: 1, pctComplete: 5 },
            { id: 'd_t2', name: 'Underground Duct Bank', start: 4.3, duration: 3.4, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_t3', name: 'Structured Cabling / WiFi / DAS', start: 4.1, duration: 4.3, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_t4', name: 'Network Core & Data Hall 1', start: 7.6, duration: 2.6, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - SECURITY =====
            { id: 'd_sec', name: 'DESIGN - SECURITY', phase: 'design', isPhase: true },
            { id: 'd_sec1', name: 'Security General Specs', start: 2, duration: 3.1, type: 'design', phase: 'design', indent: 1, pctComplete: 5 },
            { id: 'd_sec2', name: 'Security Exterior', start: 8.3, duration: 3.6, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_sec3', name: 'Security Interior', start: 8.3, duration: 5, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - BAS / EPMS / BMS =====
            { id: 'd_bas', name: 'DESIGN - BAS / EPMS / BMS', phase: 'design', isPhase: true },
            { id: 'd_b1', name: 'EPMS - Admin, Core & DH1', start: 6.2, duration: 2, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_b2', name: 'EPMS - Data Hall 2-4', start: 7.9, duration: 2.6, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_b3', name: 'BAS - Admin, Core & DH1', start: 7.6, duration: 2, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_b4', name: 'BAS - Data Hall 2-4', start: 7.9, duration: 2.6, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_b5', name: 'BMS - Admin, Core & DH1', start: 7.6, duration: 2, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },
            { id: 'd_b6', name: 'BMS - Data Hall 2-4', start: 8.3, duration: 2.2, type: 'design', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== DESIGN - HV SUBSTATION =====
            { id: 'd_hv', name: 'DESIGN - HV SUBSTATION', phase: 'design', isPhase: true },
            { id: 'd_hv1', name: 'HV Substation Design', start: 3, duration: 2.4, type: 'substation', phase: 'design', indent: 1, pctComplete: 0 },

            // ===== PROCUREMENT - HUT 8 =====
            { id: 'pr_h8', name: 'PROCUREMENT - HUT 8 SUPPLIED', phase: 'procurement', isPhase: true },
            { id: 'pr_1', name: 'Motor Operated Switch 230kV (3 ea)', start: 2, duration: 2.8, type: 'procurement', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_2', name: 'CAT 3516E Generators (7 ea)', start: 2, duration: 2.8, type: 'procurement', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_3', name: 'Surge Arresters 34.5kV (36 ea)', start: 2, duration: 2.8, type: 'procurement', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_4', name: 'Surge Arresters 230kV MPT (9 ea)', start: 2, duration: 3.7, type: 'procurement', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_5', name: 'Motor Operated Switch 34.5kV (6 ea)', start: 2, duration: 4.7, type: 'procurement', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_6', name: 'Disconnect Switch 230kV (6 ea)', start: 2, duration: 4.7, type: 'procurement', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_7', name: 'Disconnect Switch 34.5kV (7 ea)', start: 2, duration: 4.7, type: 'procurement', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_8', name: 'Circuit Breaker 34.5kV (12 ea)', start: 2, duration: 5.6, type: 'procurement', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_9', name: 'Circuit Breaker 230kV (3 ea)', start: 2, duration: 5.6, type: 'procurement', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_10', name: 'MPT 132/176/220MVA (2 unit)', start: 2, duration: 2.8, type: 'substation', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pr_11', name: 'MPT 132/176/220MVA (1 unit)', start: 5, duration: 6.5, type: 'substation', phase: 'procurement', indent: 1, pctComplete: 0 },

            // ===== PROCUREMENT - VERTIV =====
            { id: 'pr_vtv', name: 'PROCUREMENT - VERTIV SUPPLIED', phase: 'procurement', isPhase: true },
            { id: 'pv_1', name: 'Network Power Skids & UPS (Core)', start: 2, duration: 6.2, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_2', name: 'Network MMR Battery Skids (Core)', start: 2, duration: 7.2, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_3', name: 'IT Power Skids (DH 1-4)', start: 2, duration: 11.5, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_4', name: 'Mechanical Power Skids (DH 1-4)', start: 2, duration: 11.5, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_5', name: 'Buffer Tank Skids (DH 1-4)', start: 2, duration: 11.5, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_6', name: 'Hydro Modules (DH 1-4)', start: 2, duration: 12.5, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_7', name: 'Battery Skids (DH 1-4)', start: 2, duration: 13.7, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_8', name: 'SmartRun / CDU (DH 1-4)', start: 2, duration: 13.7, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_9', name: 'MV 36kV Ring Main Unit (DH 1-4)', start: 2, duration: 11.5, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_10', name: 'CDU Units (DH 1-4)', start: 2, duration: 11.5, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_11', name: 'Chiller OFC (DH 1-4)', start: 2, duration: 11.5, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_12', name: 'MV 36kV 3.75MVA 480V (DH 1-4)', start: 2, duration: 13.7, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_13', name: 'MV 36kV 3.75MVA 415V (DH 1-4)', start: 2, duration: 13.7, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_14', name: 'Fan Wall Units (DH 1-4)', start: 2, duration: 13.7, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },
            { id: 'pv_15', name: 'CW 181 Units (DH 1-4)', start: 2, duration: 13.7, type: 'vertiv', phase: 'procurement', indent: 1, pctComplete: 0 },

            // ===== FACTORY ACCEPTANCE TEST =====
            { id: 'fat', name: 'FACTORY ACCEPTANCE TEST', phase: 'construction', isPhase: true },
            { id: 'fat1', name: 'FAT - DH 1 & Core', start: 7.5, duration: 0.5, type: 'milestone', phase: 'construction', indent: 1, isMilestone: true, date: 'May 15, 2026', pctComplete: 0 },
            { id: 'fat2', name: 'FAT - DH 2', start: 8.8, duration: 0.5, type: 'milestone', phase: 'construction', indent: 1, isMilestone: true, date: 'Jun 26, 2026', pctComplete: 0 },
            { id: 'fat3', name: 'FAT - DH 3', start: 10.5, duration: 0.5, type: 'milestone', phase: 'construction', indent: 1, isMilestone: true, date: 'Aug 14, 2026', pctComplete: 0 },
            { id: 'fat4', name: 'FAT - DH 4', start: 11.8, duration: 0.5, type: 'milestone', phase: 'construction', indent: 1, isMilestone: true, date: 'Sep 25, 2026', pctComplete: 0 },

            // ===== CONSTRUCTION =====
            { id: 'con', name: 'CONSTRUCTION', phase: 'construction', isPhase: true },
            { id: 'cn1', name: 'Pre-Construction', start: 0, duration: 5.7, type: 'construction', phase: 'construction', indent: 1, pctComplete: 35 },
            { id: 'cn2', name: 'Construction Procurement', start: 2, duration: 4.7, type: 'procurement', phase: 'construction', indent: 1, pctComplete: 0 },
            { id: 'cn3', name: 'Contractor Procurement', start: 2, duration: 9.2, type: 'procurement', phase: 'construction', indent: 1, pctComplete: 0 },
            { id: 'cn4', name: 'Permits', start: 2, duration: 5.8, type: 'sitework', phase: 'construction', indent: 1, pctComplete: 0 },
            { id: 'cn5', name: 'Construction', start: 2, duration: 21.7, type: 'construction', phase: 'construction', indent: 1, pctComplete: 0 },
            { id: 'cn6', name: 'Final Commissioning Verified', start: 23, duration: 0.3, type: 'commissioning', phase: 'construction', indent: 1, pctComplete: 0 },
            { id: 'cn7', name: 'Project Completion', start: 23, duration: 0.5, type: 'milestone', phase: 'construction', indent: 1, isMilestone: true, date: 'Sep 30, 2027', pctComplete: 0 }
        ];

        function generateMonthLabels() {
            var header = document.getElementById('timeline-header');
            var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            var mi = 9;
            var yr = 2025;
            for (var i = 0; i < totalMonths; i++) {
                var label = document.createElement('div');
                var isYS = mi === 0;
                label.className = 'month-label' + (isYS ? ' year-start' : '');
                label.textContent = months[mi] + ((isYS || i === 0) ? " '" + yr.toString().slice(-2) : '');
                header.appendChild(label);
                mi++;
                if (mi > 11) { mi = 0; yr++; }
            }
        }

        function generateGridLines() {
            var h = '';
            var mi = 9;
            for (var i = 0; i < totalMonths; i++) {
                h += '<div class="grid-line' + (mi === 0 ? ' year-start' : '') + '"></div>';
                mi++;
                if (mi > 11) mi = 0;
            }
            return h;
        }

        function getTaskData(id) {
            return taskData[id] || { rag: 'none', comment: '' };
        }

        function renderGantt(filter) {
            filter = filter || 'all';
            var body = document.getElementById('gantt-body');
            var html = '';

            tasks.forEach(function(task) {
                if (filter !== 'all' && task.phase !== filter) return;

                var indentClass = task.indent ? 'task-indent-' + task.indent : '';
                var phaseClass = task.isPhase ? 'phase-header' : '';
                var data = getTaskData(task.id);

                html += '<div class="gantt-row ' + phaseClass + '" data-phase="' + task.phase + '">';

                html += '<div class="rag-cell" onclick="editTask(\'' + task.id + '\',\'' + task.name.replace(/'/g, "\\'") + '\')">';
                if (!task.isPhase) html += '<div class="rag-indicator ' + data.rag + '"></div>';
                html += '</div>';

                html += '<div class="task-cell ' + indentClass + '" onclick="editTask(\'' + task.id + '\',\'' + task.name.replace(/'/g, "\\'") + '\')">';
                html += '<span class="task-name">' + task.name + '</span>';
                if (data.comment) html += '<span class="has-comment" title="Has comment">&#128172;</span>';
                if (task.duration && !task.isPhase && !task.isMilestone && task.duration > 0.5) {
                    html += '<span class="task-duration">' + (Math.round(task.duration * 10) / 10) + 'mo</span>';
                }
                if (task.date) html += '<span class="task-duration">' + task.date + '</span>';
                html += '</div>';

                html += '<div class="timeline-cell">';
                html += '<div class="grid-lines">' + generateGridLines() + '</div>';
                html += '<div class="today-line" style="left:' + (todayOffset * monthWidth) + 'px"></div>';

                if (task.start !== undefined && task.duration) {
                    var left = task.start * monthWidth;
                    var width = Math.max(task.duration * monthWidth - 4, 16);
                    var pct = task.pctComplete !== undefined ? task.pctComplete : 0;

                    if (task.isMilestone) {
                        var mc = pct >= 100 ? ' completed' : '';
                        html += '<div class="milestone-marker' + mc + '" style="left:' + (left + 9) + 'px"></div>';
                    } else {
                        html += '<div class="bar ' + task.type + '" style="left:' + left + 'px;width:' + width + 'px" ';
                        html += 'data-task="' + task.name + '" data-pct="' + pct + '" ';
                        html += 'data-start="' + task.start + '" data-duration="' + task.duration + '" data-type="' + task.type + '">';
                        html += (width > 85 ? task.name : '');
                        html += '</div>';
                    }
                }
                html += '</div></div>';
            });

            body.innerHTML = html;
            attachBarListeners();
        }

        function editTask(id, name) {
            currentTaskId = id;
            document.getElementById('modal-title').textContent = name;
            var data = getTaskData(id);
            selectedRag = data.rag || 'none';
            document.getElementById('modal-comment').value = data.comment || '';
            document.querySelectorAll('.rag-option').forEach(function(el) {
                el.classList.remove('selected');
                if (el.dataset.rag === selectedRag) el.classList.add('selected');
            });
            document.getElementById('modal').classList.add('active');
        }

        function selectRag(rag) {
            selectedRag = rag;
            document.querySelectorAll('.rag-option').forEach(function(el) {
                el.classList.remove('selected');
                if (el.dataset.rag === rag) el.classList.add('selected');
            });
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
            currentTaskId = null;
        }

        function saveTask() {
            taskData[currentTaskId] = { rag: selectedRag, comment: document.getElementById('modal-comment').value.trim() };
            saveToStorage();
            renderGantt(document.querySelector('.filter-btn.active').dataset.filter);
            closeModal();
        }

        function saveToStorage() {
            localStorage.setItem('riverBendSchedule', JSON.stringify(taskData));
        }

        function loadFromStorage() {
            var saved = localStorage.getItem('riverBendSchedule');
            if (saved) {
                var d = JSON.parse(saved);
                Object.keys(d).forEach(function(k) { taskData[k] = d[k]; });
            }
        }

        function attachBarListeners() {
            var tooltip = document.getElementById('tooltip');

            function gpc(p) { return p >= 100 ? 'complete' : p >= 75 ? 'high' : p >= 25 ? 'medium' : p > 0 ? 'low' : 'not-started'; }
            function gpl(p) { return p >= 100 ? 'Complete' : p >= 75 ? 'On Track' : p >= 25 ? 'In Progress' : p > 0 ? 'Started' : 'Not Started'; }

            document.querySelectorAll('.bar').forEach(function(bar) {
                bar.addEventListener('mouseenter', function(e) {
                    var task = bar.dataset.task;
                    var sm = parseFloat(bar.dataset.start);
                    var dur = parseFloat(bar.dataset.duration);
                    var type = bar.dataset.type;
                    var pct = parseInt(bar.dataset.pct) || 0;
                    var pc = gpc(pct);

                    var sd = new Date(2025, 9 + sm, 1);
                    var ed = new Date(2025, 9 + sm + Math.ceil(dur), 0);
                    var fmt = function(d) { return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }); };

                    tooltip.querySelector('.tooltip-title').textContent = task;
                    tooltip.querySelector('.tooltip-content').innerHTML =
                        '<div style="font-size:1.1rem;font-weight:700;margin-bottom:4px" class="' + pc + '">' + pct + '% Complete</div>' +
                        '<div class="tooltip-row"><span class="tooltip-label">Status:</span><span>' + gpl(pct) + '</span></div>' +
                        '<div style="height:8px;background:rgba(176,174,165,0.15);border-radius:4px;margin:8px 0;overflow:hidden">' +
                        '<div style="height:100%;width:' + pct + '%;border-radius:4px" class="progress-fill-' + pc + '"></div></div>' +
                        '<div class="tooltip-row"><span class="tooltip-label">Start:</span><span>' + fmt(sd) + '</span></div>' +
                        '<div class="tooltip-row"><span class="tooltip-label">End:</span><span>' + fmt(ed) + '</span></div>' +
                        '<div class="tooltip-row"><span class="tooltip-label">Duration:</span><span>' + (Math.round(dur * 10) / 10) + ' months</span></div>' +
                        '<div class="tooltip-row"><span class="tooltip-label">Category:</span><span>' + type.charAt(0).toUpperCase() + type.slice(1) + '</span></div>';
                    tooltip.classList.add('visible');
                });
                bar.addEventListener('mousemove', function(e) {
                    tooltip.style.left = e.clientX + 15 + 'px';
                    tooltip.style.top = e.clientY + 15 + 'px';
                });
                bar.addEventListener('mouseleave', function() { tooltip.classList.remove('visible'); });
            });
        }

        document.querySelectorAll('.filter-btn').forEach(function(btn) {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(function(b) { b.classList.remove('active'); });
                btn.classList.add('active');
                renderGantt(btn.dataset.filter);
            });
        });

        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        loadFromStorage();
        generateMonthLabels();
        renderGantt();

        function switchTab(tabName) {
            document.querySelectorAll('.tab-panel').forEach(function(p) { p.classList.remove('active'); });
            document.querySelectorAll('.tab-btn').forEach(function(b) { b.classList.remove('active'); });
            document.getElementById('tab-' + tabName).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
